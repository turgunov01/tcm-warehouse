import{_ as x}from"./CeTMl5KV.js";import{_ as y}from"./Bg2tV3qA.js";import{e as C,g as B,i as S,j,h as F,c as l,l as t,W as _,a as e,b as i,w as c,o as s,F as L,x as M,v as N,t as R,y as b,n as T}from"./C3nFx1By.js";import"./zCT-49bZ.js";import"./BNwErHV-.js";const U={class:"page-shell"},V={key:0},W={key:1,class:"mx-auto flex max-w-[1440px] gap-4 p-4 lg:p-6"},$={class:"hidden w-64 shrink-0 lg:block"},q={class:"space-y-1"},z={class:"font-semibold"},A={class:"space-y-2"},D={class:"w-full min-w-0"},E={class:"mb-4 flex items-center justify-between lg:hidden"},K=C({__name:"default",setup(H){const p=B(),{user:u,profile:a,loadProfile:f,roleHome:h}=S(),g=b(()=>p.path==="/login");j(async()=>{u.value&&!a.value&&await f()});const k=b(()=>{const o=a.value?.role;return o==="admin"?[{label:"Панель",to:"/admin"},{label:"Бронирования",to:"/admin/bookings"},{label:"Зоны",to:"/admin/zones"},{label:"Пользователи",to:"/admin/users"},{label:"Настройки",to:"/admin/settings"},{label:"Уведомления",to:"/admin/notifications"},{label:"Аудит",to:"/admin/audit"}]:o==="tenant"?[{label:"Панель",to:"/tenant"},{label:"Бронирования",to:"/tenant/bookings"},{label:"История",to:"/tenant/history"},{label:"Профиль",to:"/tenant/profile"},{label:"Уведомления",to:"/tenant/notifications"}]:o==="guard"?[{label:"Зоны",to:"/guard"},{label:"Бронирования на сегодня",to:"/guard/bookings"}]:[]}),w=F(),d=async()=>{await w.auth.signOut(),await T("/login")};return(o,m)=>{const n=x,v=y;return s(),l("div",U,[t(g)?(s(),l("div",V,[_(o.$slots,"default")])):(s(),l("div",W,[e("aside",$,[i(v,null,{header:c(()=>[e("div",q,[m[0]||(m[0]=e("p",{class:"text-sm text-slate-500"},"TCM Warehouse",-1)),e("p",z,R(t(a)?.full_name||t(a)?.username||t(u)?.email),1)])]),footer:c(()=>[i(n,{label:"Выйти",color:"white",block:"",onClick:d})]),default:c(()=>[e("div",A,[(s(!0),l(L,null,M(t(k),r=>(s(),N(n,{key:r.to,to:r.to,block:"",color:"white",variant:"ghost",label:r.label},null,8,["to","label"]))),128))])]),_:1})]),e("main",D,[e("div",E,[i(n,{icon:"i-heroicons-arrow-top-right-on-square",to:t(h)(t(a)?.role),label:"Главная"},null,8,["to"]),i(n,{label:"Выйти",color:"white",variant:"outline",onClick:d})]),_(o.$slots,"default")])]))])}}});export{K as default};
