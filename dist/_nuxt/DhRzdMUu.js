import{_ as C,a as U}from"./89_6_WXE.js";import{_ as V}from"./CeTMl5KV.js";import{_ as g}from"./hTEjwFDU.js";import{_ as h}from"./Bg2tV3qA.js";import{_ as B}from"./LHM2B4W_.js";import{e as q,h as Z,j as $,c as F,a as r,b as o,w as l,r as x,o as M,k as N,l as t,p as S}from"./C3nFx1By.js";import"./DLtK76PB.js";import"./zCT-49bZ.js";import"./BNwErHV-.js";const j={class:"space-y-4"},E={class:"flex items-end"},G={class:"flex gap-2"},P=q({__name:"zones",setup(I){const c=Z(),_=x([]),e=S({name:"",description:""}),i=x(null),m=async()=>{const{data:n}=await c.from("zones").select("*").order("created_at");_.value=n??[]},b=async()=>{e.name.trim()&&(i.value?await c.from("zones").update({name:e.name,description:e.description||null}).eq("id",i.value):await c.from("zones").insert({name:e.name,description:e.description||null}),e.name="",e.description="",i.value=null,await m())},v=n=>{i.value=n.id,e.name=n.name,e.description=n.description||""},k=async n=>{await c.from("zones").delete().eq("id",n),await m()};return $(m),(n,a)=>{const p=U,u=C,d=V,w=g,f=h,y=B;return M(),F("div",j,[a[2]||(a[2]=r("div",null,[r("h1",{class:"text-2xl font-semibold"},"Зоны"),r("p",{class:"text-sm text-slate-500"},"Создание и управление зонами склада.")],-1)),o(f,null,{default:l(()=>[o(w,{state:t(e),class:"grid gap-3 md:grid-cols-[2fr_3fr_auto]",onSubmit:N(b,["prevent"])},{default:l(()=>[o(u,{label:"Название зоны"},{default:l(()=>[o(p,{modelValue:t(e).name,"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).name=s),placeholder:"Зона 1",required:""},null,8,["modelValue"])]),_:1}),o(u,{label:"Описание"},{default:l(()=>[o(p,{modelValue:t(e).description,"onUpdate:modelValue":a[1]||(a[1]=s=>t(e).description=s),placeholder:"Необязательное примечание"},null,8,["modelValue"])]),_:1}),r("div",E,[o(d,{type:"submit",color:"white",label:t(i)?"Обновить":"Создать"},null,8,["label"])])]),_:1},8,["state"])]),_:1}),o(f,null,{default:l(()=>[o(y,{rows:t(_),columns:[{key:"name",label:"Название"},{key:"description",label:"Описание"},{key:"actions",label:"Действия"}]},{"actions-data":l(({row:s})=>[r("div",G,[o(d,{size:"xs",label:"Изменить",onClick:z=>v(s)},null,8,["onClick"]),o(d,{size:"xs",color:"red",variant:"outline",label:"Удалить",onClick:z=>k(s.id)},null,8,["onClick"])])]),_:1},8,["rows"])]),_:1})])}}});export{P as default};
