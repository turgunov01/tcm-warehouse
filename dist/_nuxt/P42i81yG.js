import{_ as U,a as C}from"./89_6_WXE.js";import{_ as k}from"./CeTMl5KV.js";import{_ as B}from"./hTEjwFDU.js";import{_ as N}from"./Bg2tV3qA.js";import{e as S,h as g,i as F,j as L,c as i,a as s,b as o,w as l,p as M,o as f,k as R,l as t,t as d,m as j,r as q}from"./C3nFx1By.js";import{u as A}from"./BOtwTEl-.js";import"./DLtK76PB.js";import"./zCT-49bZ.js";import"./BNwErHV-.js";const D={class:"space-y-4 max-w-xl"},E={key:0,class:"mt-3 text-sm text-slate-600"},G={class:"mt-2 text-xs text-slate-500"},W=S({__name:"profile",setup(I){const x=g(),{user:p,profile:b,loadProfile:r}=F(),{roleLabel:h}=A(),e=M({full_name:"",phone:""}),m=q("");L(async()=>{const a=await r();e.full_name=a?.full_name||"",e.phone=a?.phone||""});const V=async()=>{if(!p.value)return;const{error:a}=await x.from("profiles").update({full_name:e.full_name,phone:e.phone}).eq("id",p.value.id);m.value=a?a.message:"Профиль обновлен.",await r()};return(a,n)=>{const u=C,c=U,v=k,w=B,y=N;return f(),i("div",D,[n[2]||(n[2]=s("div",null,[s("h1",{class:"text-2xl font-semibold"},"Профиль"),s("p",{class:"text-sm text-slate-500"},"Обновите контактные данные.")],-1)),o(y,null,{default:l(()=>[o(w,{state:t(e),class:"space-y-3",onSubmit:R(V,["prevent"])},{default:l(()=>[o(c,{label:"ФИО"},{default:l(()=>[o(u,{modelValue:t(e).full_name,"onUpdate:modelValue":n[0]||(n[0]=_=>t(e).full_name=_)},null,8,["modelValue"])]),_:1}),o(c,{label:"Телефон"},{default:l(()=>[o(u,{modelValue:t(e).phone,"onUpdate:modelValue":n[1]||(n[1]=_=>t(e).phone=_)},null,8,["modelValue"])]),_:1}),o(v,{type:"submit",label:"Сохранить",color:"white"})]),_:1},8,["state"]),t(m)?(f(),i("p",E,d(t(m)),1)):j("",!0),s("p",G,"Роль: "+d(t(h)(t(b)?.role)),1)]),_:1})])}}});export{W as default};
